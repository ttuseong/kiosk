<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="lotteria">

	<select id="categoryList" resultType="com.javaex.vo.LotteriaVo">
		<![CDATA[
			select categoryNo, 
				   categoryName 
			from category 
			where storeNo=2 
			and categoryNo !=28 
			and categoryNo !=29 
			order by categoryNo asc
		]]>
	</select>
	
	<select id="menuList" resultType="com.javaex.vo.LotteriaVo">
	<![CDATA[
		select menuNo, 
			   m.categoryNo categoryNo, 
			   menuName, 
			   menuDesc, 
			   menuPrice, 
			   menuImg, 
			   isSpecial 
		from menu m , 
			 category c  
		where m.categoryNo = c.categoryNo 
		and c.storeNo=2
        and c.categoryNo!=28
        and c.categoryNo!=29
	]]>
	</select>
		
	<select id="cateNo4setMenu" resultType="com.javaex.vo.LotteriaVo">
		<![CDATA[
			select setNo, 
				   categoryNo, 
				   setName, 
				   setPrice, 
				   setImg, 
				   setDesc, 
				   isSpecial 
			from setmenu 
			where categoryNo=4
		]]>
	</select>
	
	<!-- 세트메뉴가 있는지 없는지 있다면 몇개가 있는지 카운트해줌 -->
	<select id="setOrSingle" resultType="int" parameterType="int">
		<![CDATA[
			select count(*) from useMenu where menuNo=#{menuNo}
		]]>
	</select>
	
	<!-- 메뉴넘버를 이용해서 세트메뉴의 데이터를 가져옴 -->
	<select id="selectMenu" resultType="com.javaex.vo.LotteriaVo" parameterType="int">
		<![CDATA[
			select sm.setNo, 
				   sm.setName, 
				   sm.setprice, 
				   sm.setImg, 
				   sm.setDesc 
			from useMenu um, 
				 setMenu sm 
			where um.setNo = sm.setNo 
			and menuNo=#{menuNo}
		]]>
	</select>
	
	<select id="dessertAndDrink" resultType="com.javaex.vo.LotteriaVo">
		<![CDATA[
			select menuNo, 
				   categoryNo, 
				   menuName, 
				   menuDesc, 
				   menuPrice, 
				   menuImg, 
				   isSpecial 
			from menu 
			where categoryNo=28 
			or categoryNo=29
		]]>
	</select>
	
</mapper>