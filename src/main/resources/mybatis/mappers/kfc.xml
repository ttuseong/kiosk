<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kfc">
	<select id="selectCateList" resultType="com.javaex.vo.CategoryVo">
		<![CDATA[
			SELECT
			    c.categoryNo,
			    c.categoryName,
			    c.publicYN
			FROM
			    store s,
			    category c
			where
			    s.storeName = 'KFC'
			and
			    s.storeno = c.storeno
			order by c.categoryno asc
		]]>
	</select>
	<select id="selectMenuList" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
				menuNo,
			    menuName,
			    menuDesc,
			    menuPrice,
			    menuImg
			FROM
			    menu
			where
			    categoryNo = #{categoryNo}
		]]>
	</select>
	
	<select id="selectCountMenu" resultType="int" parameterType="int">
		<![CDATA[
			SELECT
			    count(menuNo)
			FROM
			    menu
			where
			    categoryNo = #{categoruNo}
		]]>
	</select>
	<select id="selectMenu" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
				menuNo,
			    menuName,
			    menuDesc,
			    menuPrice,
			    menuImg,
			    isSet
			FROM
			    menu
			where
			    menuNo=#{menuNo}
		]]>
	</select>
	<select id="selectSetMenus" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    sm.setname menuName,
			    sm.setPrice menuPrice,
			    sm.setimg menuImg,
			    sm.unitno,
			    su.unitName
			FROM
			    menu m,
			    usemenu um,
			    setmenu sm,
			    setunit su
			where
			    m.menuNo = um.menuNo
			and
			    um.setNo = sm.setNo
			and
			    sm.unitNo=su.unitno
			and
			    m.menuNo = #{menuNo}
			order by sm.unitno desc
		]]>
	</select>
	<select id="selectCountUseCategory" resultType="com.javaex.vo.MenuVo" parameterType="String">
		<![CDATA[
			SELECT
			    m.menuName,
			    dm.categoryno,
			    dm.defaultNo,
			    c.categoryname,
			    m.menuimg
			FROM
			    setUnit su,
			    useCategory uc,
			    defaultMenu dm,
			    menu m,
			    category c
			where
			    su.unitName=#{unitName}
			and
			    su.unitno=uc.unitno
			and
			    uc.unitno=dm.unitno
			and
			    uc.categoryno = dm.categoryno
			and
			    dm.menuno=m.menuno
			and
			    dm.categoryno=c.categoryno
			order by dm.defaultno desc
		]]>
	</select>
	<select id="selectToppingList" resultType="com.javaex.vo.MenuVo">
		<![CDATA[
			SELECT
				toppingNo menuNo,
			    toppingname menuName,
			    toppingprice menuPrice,
			    toppingimg menuImg
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	<select id="selectToppingbasicInfo" resultType="com.javaex.vo.ToppingVo">
		<![CDATA[
			SELECT
			    toppingNo,
			    toppingname,
    			toppingPrice
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	<select id="selectRecommenDationMenuList" resultType="com.javaex.vo.MenuVo">
		<![CDATA[
			select  m.menuimg,
        			m.menuname,
        			m.menuprice
			from
    				menu m,
    				store s,
    				category c
			where 
					s.storename='KFC'
			and 
    				s.storeno=c.storeno
			and
    				c.categoryno=m.categoryno
			and
    				m.isspecial=1
		]]>
	</select>

	<select id="selectBasicSide" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    m.menuname,
			    m.menuprice,
			    m.menuImg,
			    m.menuNo
			FROM
			    defaultmenu dm,
			    menu m
			where
			    dm.menuno = m.menuno
			and
			    dm.defaultNo = #{defaultNo}
		]]>
	</select>
	<select id="selectAnotherSide" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    m.menuname,
			    m.menuprice,
			    m.menuImg,
			    m.menuNo
			FROM
			    defaultmenu dm,
			    menu m,
			    category c
			where
			    c.categoryno = dm.categoryno
			and
			    c.categoryno = m.categoryno
			and
			    dm.defaultno=#{defaultNo}
			and
			    m.menuno != dm.menuno
			and
			    m.ischange = 1
		]]>
	</select>
	<select id="selectDefaultMenuNoList" resultType="int" parameterType="String">
		<![CDATA[
			SELECT
			    dm.menuNo
			FROM
			    defaultmenu dm,
			    setUnit su
			where
			    dm.unitno = su.unitno
			and
			    su.unitname=#{defaultName}
			order by dm.defaultno desc
		]]>
	</select>
</mapper>