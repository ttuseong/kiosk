<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kfc">
	<select id="selectCateList" resultType="com.javaex.vo.CategoryVo">
		<![CDATA[
			SELECT
			    c.categoryNo,
			    c.categoryName,
			    c.categoryImg
			FROM
			    store s,
			    category c
			where
			    s.storeName = 'KFC'
			and
			    s.storeno = c.storeno
			and
			    c.publicYN = 1
			order by c.categoryno asc
		]]>
	</select>
	<select id="selectMenuList" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
				menuNo,
			    menuName,
			    menuDesc,
			    menuPrice,
			    menuImg
			FROM
			    menu
			where
			    categoryNo = #{categoryNo}
			and
			    unitNo is null
		]]>
	</select>
	<select id="selectMenu" resultType="com.javaex.vo.MenuVo" parameterType="com.javaex.vo.MenuVo">
		<![CDATA[
			SELECT
			    menuNo,
				menuName,
				menuDesc,
				menuPrice,
				menuImg,
				unitNo
			FROM
			    menu
			where
			    categoryNo = #{categoryNo}
			and
			    menuName like #{menuName}||'%'
			order by menuNo asc
		]]>
	</select>
	
	<select id="selectToppingList" resultType="com.javaex.vo.MenuVo">
		<![CDATA[
			SELECT
				toppingNo menuNo,
			    toppingname menuName,
			    toppingprice menuPrice,
			    toppingimg menuImg
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	<select id="selectToppingbasicInfo" resultType="com.javaex.vo.ToppingVo">
		<![CDATA[
			SELECT
			    toppingNo,
			    toppingname,
    			toppingPrice
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	<select id="selectRecommenDationMenuList" resultType="com.javaex.vo.MenuVo">
		<![CDATA[
			select  m.menuimg,
        			m.menuname,
        			m.menuprice
			from
    				menu m,
    				store s,
    				category c
			where 
					s.storename='KFC'
			and 
    				s.storeno=c.storeno
			and
    				c.categoryno=m.categoryno
			and
    				m.isspecial=1
		]]>
	</select>
	<select id="selectBasicSide" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    menuName,
			    menuPrice,
			    menuImg,
			    menuNo
			FROM
			    menu
			where
			    menuNo = #{menuNo}
		]]>
	</select>
	<select id="selectAnotherSide" resultType="com.javaex.vo.MenuVo" parameterType="com.javaex.vo.MenuVo">
		<![CDATA[
			SELECT
			    menuName,
			    menuPrice,
			    menuImg,
			    menuNo
			FROM
			    menu
			where
			    categoryNo = #{categoryNo}
			and
			    isChange = 1
			and
				menuNo != #{menuNo}
		]]>
	</select>
	<select id="selectDefaultMenuList" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    m.menuname,
				m.menuprice,
				m.menuImg,
			    m.menuNo,
			    m.categoryNo,
			    c.categoryname
			FROM
			    defaultMenu dm,
			    menu m,
			    category c
			where
			    dm.unitNo = #{unitNo}
			and
			    dm.menuNo = m.menuNo
			and
			    c.categoryNo = m.categoryNo
			order by m.menuNo desc
		]]>
	</select>
</mapper>