<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kfc">
	<select id="selectCateList" resultType="com.javaex.vo.CategoryVo">
		<![CDATA[
			SELECT
			    c.categoryNo,
			    c.categoryName,
			    c.publicYN
			FROM
			    store s,
			    category c
			where
			    s.storeName = 'KFC'
			and
			    s.storeno = c.storeno
			order by c.categoryno asc
		]]>
	</select>
	<select id="selectMenuList" resultType="com.javaex.vo.MenuVo" parameterType="com.javaex.vo.PageVo">
		<![CDATA[
			SELECT
				menuNo,
			    menuName,
			    menuDesc,
			    menuPrice,
			    menuImg,
			    isSet
			FROM
			    menu
			where
			    categoryNo = #{categoryNo}
		]]>
	</select>
	
	<select id="selectCountMenu" resultType="int" parameterType="int">
		<![CDATA[
			SELECT
			    count(menuNo)
			FROM
			    menu
			where
			    categoryNo = #{categoruNo}
		]]>
	</select>
	<select id="selectMenu" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
				menuNo,
			    menuName,
			    menuDesc,
			    menuPrice,
			    menuImg,
			    isSet
			FROM
			    menu
			where
			    menuNo=#{menuNo}
		]]>
	</select>
	<select id="selectSetMenus" resultType="com.javaex.vo.MenuVo" parameterType="int">
		<![CDATA[
			SELECT
			    sm.setname menuName,
			    sm.setPrice menuPrice,
			    sm.setimg menuImg
			FROM
			    menu m,
			    usemenu um,
			    setmenu sm
			where
			    m.menuNo = um.menuNo
			and
			    um.setNo = sm.setNo
			and
			    m.menuNo = #{menuNo}
		]]>
	</select>
	<select id="selectToppingList" resultType="com.javaex.vo.ToppingVo">
		<![CDATA[
			SELECT
				toppingNo,
			    toppingname,
			    toppingprice,
			    toppingimg
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	<select id="selectToppingbasicInfo" resultType="com.javaex.vo.ToppingVo">
		<![CDATA[
			SELECT
			    toppingNo,
			    toppingname,
    			toppingPrice
			FROM
			    topping
			where
			    storeNo=1
		]]>
	</select>
	
	<select id="selectRecommenDationMenuList" resultType="com.javaex.vo.MenuVo">
		<![CDATA[
			select  m.menuimg,
        			m.menuname,
        			m.menuprice
			from
    				menu m,
    				store s,
    				category c
			where 
					s.storename='KFC'
			and 
    				s.storeno=c.storeno
			and
    				c.categoryno=m.categoryno
			and
    				m.isspecial=1
		]]>
	</select>
</mapper>